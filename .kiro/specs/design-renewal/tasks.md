# Implementation Plan

## Task Overview

デザイン刷新プロジェクトの実装タスクを段階的に定義します。Phase 1（基盤）から開始し、Phase 4（仕上げ）まで進行します。

---

## Phase 1: デザインシステム基盤

- [x] 1. デザイントークンの基盤構築
- [x] 1.1 OKLCHカラーパレットの定義
  - 紫ベースのプライマリカラー（50-900の10段階）をOKLCH形式で定義する
  - ニュートラルグレーパレット（50-900）を定義する
  - セマンティックカラー（background, surface, text-primary, text-secondary, accent）を定義する
  - 古いブラウザ向けにhexフォールバックを@supportsで提供する
  - _Requirements: 1.1, 1.2, 1.3_

- [x] 1.2 (P) スペーシングとタイポグラフィトークンの定義
  - 4px基準のスペーシングスケール（space-1〜space-16）を定義する
  - フォントサイズスケール（xs〜5xl）を定義する
  - 行の高さ変数（tight, normal, relaxed）を定義する
  - _Requirements: 1.5, 3.1, 3.2_

- [x] 1.3 (P) アニメーションとUIトークンの定義
  - トランジション時間（fast, normal, slow）を定義する
  - イージング関数（default, in, out）を定義する
  - シャドウスケール（sm, md, lg, xl）を定義する
  - ボーダーラディウス（sm, md, lg, xl, full）を定義する
  - フォーカスリングとタッチターゲットの変数を定義する
  - prefers-reduced-motion対応を実装する
  - _Requirements: 7.1, 7.3, 8.1, 8.2, 8.4_

- [x] 1.4 ダークモード対応の実装
  - html.darkクラスによるダークモード変数オーバーライドを実装する
  - prefers-color-schemeメディアクエリによるOS設定連動を実装する
  - ダークモードでのシャドウ調整を行う
  - _Requirements: 1.4_

- [x] 1.5 既存tag-variables.cssとの統合
  - design-tokens.cssをglobal.cssでインポートする
  - tag-variables.cssの変数をdesign-tokensからの参照に移行する
  - 互換性を維持しながら重複定義を削除する
  - _Requirements: 1.3_

## Phase 2: タイポグラフィとフォント

- [x] 2. タイポグラフィシステムの実装
- [x] 2.1 日本語フォントの導入
  - Google Fonts CDNからNoto Sans JP（400, 500, 700）を読み込む設定を追加する
  - preconnectとpreloadによる最適化を実装する
  - フォントファミリーのフォールバックスタック（Noto Sans JP, Hiragino Kaku Gothic Pro, Meiryo）を設定する
  - _Requirements: 3.3_

- [x] 2.2 (P) グローバルタイポグラフィスタイルの更新
  - 見出し（h1-h6）にデザイントークンを適用する
  - 本文のフォントサイズと行の高さを調整する
  - 最小フォントサイズ16pxをすべてのデバイスで保証する
  - _Requirements: 3.4, 3.5_

## Phase 3: コンポーネントスタイル

- [ ] 3. 共通コンポーネントスタイルの作成
- [ ] 3.1 カードコンポーネントスタイルの実装
  - 基本カードスタイル（背景、ボーダー、シャドウ、角丸）を定義する
  - ホバー時のトランスフォームとシャドウ変化を実装する
  - フォーカス時のアウトライン表示を実装する
  - サムネイル付きカードのバリエーションを作成する
  - カードグリッドのレスポンシブレイアウトを実装する
  - _Requirements: 2.4, 4.2, 7.4_

- [ ] 3.2 (P) ボタンコンポーネントスタイルの実装
  - プライマリボタン（背景色、テキスト色、ホバー、アクティブ状態）を定義する
  - セカンダリボタン（ボーダー、透明背景）を定義する
  - フォーカス時のアウトライン表示を実装する
  - タッチターゲット44px以上を保証する
  - _Requirements: 4.1_

- [ ] 3.3 (P) スケルトンローダースタイルの実装
  - シマーアニメーション付きスケルトンベースを定義する
  - テキスト、タイトル、画像のバリエーションを作成する
  - reduced-motion時のアニメーション停止を実装する
  - _Requirements: 4.6_

- [ ] 3.4 タグコンポーネントのカラー更新
  - タグの色をデザイントークンのパレットから参照するよう変更する
  - ダークモード対応を確認する
  - _Requirements: 4.5_

## Phase 4: ヘッダー・フッター刷新

- [ ] 4. ヘッダーコンポーネントのリニューアル
- [ ] 4.1 ヘッダー基本スタイルの刷新
  - スティッキーヘッダーを実装する（position: sticky）
  - ブランドロゴ/タイトルのスタイルを更新する
  - ナビゲーションリンクのホバー・アクティブ状態を改善する
  - デザイントークンへの参照に置換する
  - View Transitions用のtransition:persist属性を追加する
  - _Requirements: 4.3, 5.1, 5.2, 5.6_

- [ ] 4.2 モバイルメニューの実装
  - ハンバーガーボタン（44px以上のタッチターゲット）を追加する
  - モバイルメニューパネルを作成する
  - JavaScriptによるメニュー開閉トグルを実装する
  - aria-expanded、aria-controlsなどのアクセシビリティ属性を設定する
  - 768px以下でのレスポンシブ切替を実装する
  - _Requirements: 5.3_

- [ ] 4.3 フッターコンポーネントのリニューアル
  - サイトナビゲーションリンクを追加する
  - デザイントークンへの参照に置換する
  - ソーシャルリンクのスタイルを統一する
  - View Transitions用のtransition:persist属性を追加する
  - _Requirements: 5.4, 5.5_

## Phase 5: ホームページ刷新

- [ ] 5. ホームページのリニューアル
- [ ] 5.1 ヒーローセクションの刷新
  - インラインCSSをデザイントークン参照に置換する
  - ブランドカラーとビジュアルフローを改善する
  - モバイル対応のレスポンシブ調整を行う
  - _Requirements: 2.1, 2.5, 2.6_

- [ ] 5.2 ナビゲーションカードの刷新
  - card.cssのスタイルを適用する
  - ホバーインタラクションを改善する
  - 視覚的階層を強調する
  - _Requirements: 2.2, 2.4_

- [ ] 5.3 最新記事カードの刷新
  - heroImageサムネイルを表示するよう更新する
  - card.cssのサムネイル付きバリエーションを適用する
  - カードグリッドのレスポンシブレイアウトを適用する
  - _Requirements: 2.3, 2.4_

## Phase 6: ブログ記事ページ刷新

- [ ] 6. ブログ記事レイアウトのリニューアル
- [ ] 6.1 記事ヘッダー・メタデータの刷新
  - ヒーロー画像の表示スタイルを更新する
  - 日付、タグ表示のレイアウトを改善する
  - 読了時間の計算と表示を追加する
  - _Requirements: 6.1, 6.2_

- [ ] 6.2 (P) Markdownコンテンツスタイルの統一
  - 引用ブロック、コードブロック、リストにデザイントークンを適用する
  - 見出しスタイルをタイポグラフィシステムと統一する
  - コンテンツと関連情報の視覚的分離を改善する
  - _Requirements: 6.4, 6.5_

- [ ] 6.3 (P) モバイル最適化
  - コンテンツ幅の最適化を行う
  - 画像のレスポンシブサイズ調整を確認する
  - 目次のモバイル表示を改善する
  - _Requirements: 6.3, 6.6_

## Phase 7: View Transitions・アニメーション

- [ ] 7. ページ遷移とアニメーションの実装
- [ ] 7.1 View Transitionsの有効化
  - ClientRouterコンポーネントをBaseHeadに追加する
  - ヘッダー・フッターにtransition:persistを設定する
  - ページ間遷移のスムーズな動作を確認する
  - _Requirements: 8.3_

- [ ] 7.2 (P) レスポンシブブレークポイントの統一
  - 既存のメディアクエリを統一ブレークポイント（480, 768, 1024, 1440px）に整理する
  - コンテンツジャンプのないスムーズな適応を確認する
  - 320px未満の極小画面対応を確認する
  - _Requirements: 7.1, 7.2, 7.6_

## Phase 8: 検証・仕上げ

- [ ] 8. 品質検証と仕上げ
- [ ] 8.1 ビジュアル検証
  - 全ページでデザイントークンの適用を確認する
  - ダークモード切替の動作を確認する
  - ブラウザ互換性（Chrome, Firefox, Safari, Edge）を確認する
  - _Requirements: 1.1, 1.2, 1.3, 1.4_

- [ ] 8.2 (P) アクセシビリティ検証
  - フォーカスインジケーターの視認性を確認する
  - タッチターゲット44pxの保証を確認する
  - reduced-motion対応を確認する
  - _Requirements: 4.4, 7.3, 8.4_

- [ ] 8.3 (P) パフォーマンス検証
  - Lighthouseスコアを計測する
  - フォント読み込み時間を確認する
  - アニメーションによるレイアウトシフトがないことを確認する
  - _Requirements: 8.6_

---

## Requirements Coverage Summary

| Requirement | Tasks |
|-------------|-------|
| 1.1 | 1.1, 8.1 |
| 1.2 | 1.1, 8.1 |
| 1.3 | 1.1, 1.5, 8.1 |
| 1.4 | 1.4, 8.1 |
| 1.5 | 1.2 |
| 2.1 | 5.1 |
| 2.2 | 5.2 |
| 2.3 | 5.3 |
| 2.4 | 3.1, 5.2, 5.3 |
| 2.5 | 5.1 |
| 2.6 | 5.1 |
| 3.1 | 1.2 |
| 3.2 | 1.2 |
| 3.3 | 2.1 |
| 3.4 | 2.2 |
| 3.5 | 2.2 |
| 4.1 | 3.2 |
| 4.2 | 3.1 |
| 4.3 | 4.1 |
| 4.4 | 8.2 |
| 4.5 | 3.4 |
| 4.6 | 3.3 |
| 5.1 | 4.1 |
| 5.2 | 4.1 |
| 5.3 | 4.2 |
| 5.4 | 4.3 |
| 5.5 | 4.3 |
| 5.6 | 4.1 |
| 6.1 | 6.1 |
| 6.2 | 6.1 |
| 6.3 | 6.3 |
| 6.4 | 6.2 |
| 6.5 | 6.2 |
| 6.6 | 6.3 |
| 7.1 | 1.3, 7.2 |
| 7.2 | 7.2 |
| 7.3 | 1.3, 8.2 |
| 7.4 | 3.1 |
| 7.5 | (Astro Image既存対応) |
| 7.6 | 7.2 |
| 8.1 | 1.3 |
| 8.2 | 1.3 |
| 8.3 | 7.1 |
| 8.4 | 1.3, 8.2 |
| 8.5 | (将来実装として明示的に除外) |
| 8.6 | 8.3 |

**Note**:
- 要件7.5（画像最適化）は既存のAstro Image機能で対応済み
- 要件8.5（スクロールアニメーション）は将来実装として設計で明示的に除外
