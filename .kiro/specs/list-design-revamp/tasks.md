# Implementation Plan

## Tasks

- [x] 1. リストスタイル用CSSファイルの作成と基本スタイル実装
- [x] 1.1 CSS変数とリスト基本スタイルを定義
  - リストのスペーシング用変数（余白、インデント、項目間隔）を定義する
  - マーカーカラー用の変数をプライマリカラーから派生させて定義する
  - 順序なしリストと順序付きリストの共通スタイル（余白、パディング、行間）を実装する
  - リストアイテムの項目間余白を統一値（0.5em）で設定する
  - 最後のアイテムの下余白を削除するルールを追加する
  - _Requirements: 1.1, 1.2, 1.3, 1.5, 2.1, 2.2, 2.3, 2.5, 4.2, 4.5_

- [x] 1.2 マーカースタイルのカスタマイズを実装
  - 順序なしリストのマーカー（disc）にプライマリカラーを適用する
  - 順序付きリストの番号マーカーに色と太さのスタイルを適用する
  - `::marker` 疑似要素を使用してマーカーの見た目を制御する
  - _Requirements: 1.4, 2.4, 4.1, 4.3_

- [x] 2. ネストリストのスタイル実装
- [x] 2.1 階層別マーカースタイルを定義
  - 順序なしリストの2階層目をcircle、3階層目をsquareに変更する
  - 順序付きリストの2階層目をlower-alpha、3階層目をlower-romanに変更する
  - 4階層目以降はマーカースタイルをリセットして繰り返す
  - _Requirements: 3.1, 3.2, 3.4_

- [x] 2.2 ネストリストの余白とインデントを調整
  - ネストリストの左インデントを階層ごとに適用する
  - 親項目とネストリスト開始の間に上余白を設定する
  - ネスト内の項目間余白をトップレベルと同じ値に維持する
  - ネスト解消後の親項目との余白を通常の項目間余白と同じにする
  - 深いネスト（4階層以上）でインデント幅を縮小する
  - _Requirements: 3.3, 3.5, 3.6, 3.7, 3.8_

- [x] 3. ダークモード対応の実装
- [x] 3.1 ダークモード用スタイルを追加
  - `html.dark` クラス用のマーカーカラーを定義する
  - システムのダークモード設定（`prefers-color-scheme: dark`）に対応する
  - ライトモード固定（`.light`クラス）時の動作を維持する
  - マーカーカラーがWCAG AA基準のコントラストを満たすことを確認する
  - _Requirements: 5.1, 5.2, 5.3, 5.4, 5.5, 4.4_

- [x] 4. 既存ファイルの統合と整理
- [x] 4.1 global.cssにインポートを追加
  - 新規作成したlist.cssをglobal.cssからインポートする
  - インポート順序が他のスタイルと競合しないことを確認する
  - _Requirements: 4.5_

- [x] 4.2 japanese-typography.cssから重複定義を削除
  - `.prose li` の margin-bottom 定義を削除する
  - list.cssに機能が移動したことを確認する
  - _Requirements: 1.3, 2.3_

- [x] 5. 視覚的テストと検証
- [x] 5.1 テスト用コンテンツで動作確認
  - 単純な順序なしリスト（3-5項目）の表示を確認する
  - 単純な順序付きリスト（3-5項目）の表示を確認する
  - 2-4階層のネストリストでマーカー変化を確認する
  - 混在リスト（ul内にol、ol内にul）の表示を確認する
  - ネスト解消後の余白が一定であることを確認する
  - _Requirements: 1.1, 1.2, 1.3, 2.1, 2.2, 2.3, 3.1, 3.2, 3.6, 3.8_

- [x] 5.2 (P) ダークモード切り替えテスト
  - ライトモードからダークモードへの切り替えでマーカー色が変化することを確認する
  - システム設定によるダークモード自動切り替えを確認する
  - 各モードでのコントラストが十分であることを目視確認する
  - _Requirements: 5.1, 5.3, 5.5_

- [x] 5.3 (P) レスポンシブ表示テスト
  - モバイル幅（320px-767px）でリストが正しく表示されることを確認する
  - タブレット幅（768px-1023px）での表示を確認する
  - デスクトップ幅（1024px以上）での表示を確認する
  - _Requirements: 1.2, 2.2, 3.3_
