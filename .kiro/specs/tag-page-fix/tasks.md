# Implementation Plan

## Tasks

- [x] 1. CSS変数定義の整合性確保
- [x] 1.1 (P) tag-variables.cssのタグ関連変数を監査・修正する
  - `--tag-*`変数の定義漏れがないか確認
  - 全変数にフォールバック値が設定されているか検証
  - ライトモード（`:root`）とダークモード（`html.dark`）の両方で値が定義されているか確認
  - design-tokens.cssからの参照が正しく解決されるか検証
  - _Requirements: 3.1, 3.3, 3.4_

- [x] 1.2 (P) tag-variables.cssのツリー関連変数を監査・修正する
  - `--tree-*`変数の定義漏れがないか確認
  - 全変数にフォールバック値が設定されているか検証
  - ライトモード（`:root`）とダークモード（`html.dark`）の両方で値が定義されているか確認
  - _Requirements: 3.2, 3.3, 3.4_

- [x] 2. TagBadgeコンポーネントのスタイル修正
- [x] 2.1 TagBadgeの基本スタイルをCSS変数参照に統一する
  - タグテキストとカウント数のフォントサイズがCSS変数を正しく参照するよう修正
  - CSS変数参照にフォールバック値を追加
  - コンポーネント内のハードコード値をCSS変数参照に置き換え
  - _Requirements: 1.1, 1.5, 3.1_

- [x] 2.2 TagBadgeのホバー・インタラクションスタイルを修正する
  - ホバー時の背景色、文字色、ボーダー色がCSS変数を正しく参照するよう修正
  - トランジション効果がCSS変数で定義されたタイミングを使用するよう確認
  - フォーカス状態のスタイルがアクセシビリティ要件を満たすか確認
  - _Requirements: 1.2_

- [x] 2.3 TagBadgeのダークモードスタイルを整理する
  - コンポーネント内の`html.dark`セレクタを確認
  - CSS変数による制御と重複するスタイル定義を整理
  - ダークモードで背景色、文字色、ボーダー色が正しく表示されるか確認
  - _Requirements: 1.3_

- [x] 2.4 TagBadgeのレスポンシブスタイルを確認・修正する
  - モバイル画面（640px以下）でのフォントサイズがCSS変数を参照するよう確認
  - タップターゲットサイズが最小44pxを確保しているか確認
  - パディングとマージンがレスポンシブ変数を使用するよう修正
  - _Requirements: 1.4_

- [x] 3. TagTreeコンポーネントのスタイル修正
- [x] 3.1 TagTreeの基本レイアウトとインデントを修正する
  - 階層レベルに応じたインデント幅がCSS変数を参照するよう確認
  - インデントガイドの色がCSS変数を参照するよう修正
  - ツリーノードの基本パディングと余白を確認
  - _Requirements: 2.1_

- [x] 3.2 TagTreeの展開/折りたたみ機能のスタイルを修正する
  - トグルボタンの色がCSS変数を参照するよう修正
  - 展開/折りたたみアイコンの回転アニメーションが正しく動作するか確認
  - トグルボタンのホバー状態がCSS変数を使用するよう修正
  - _Requirements: 2.2, 2.3_

- [x] 3.3 TagTreeのホバー・インタラクションスタイルを修正する
  - ノードホバー時の背景色がCSS変数を参照するよう修正
  - ホバートランジション効果が適切に設定されているか確認
  - _Requirements: 2.6_

- [x] 3.4 TagTreeのダークモードスタイルを整理する
  - コンポーネント内の`html.dark`セレクタを確認
  - ツリー背景、ボーダー、ホバー色がダークモード変数を正しく参照するか確認
  - インデントガイド色のダークモード対応を確認
  - _Requirements: 2.4_

- [x] 3.5 TagTreeのレスポンシブスタイルを確認・修正する
  - モバイル画面でのフォントサイズとアイコンサイズを確認
  - インデント幅のレスポンシブ調整を確認
  - タップターゲットサイズが適切か確認
  - _Requirements: 2.5_

- [x] 4. 視覚的動作確認
- [x] 4.1 ライトモードでの表示確認を実施する
  - タグ一覧ページ（/tags/）でTagBadgeとTagTreeの表示を確認
  - タグ詳細ページ（/tags/[slug]）でTagBadgeの表示を確認
  - ホバー状態とクリック動作を確認
  - _Requirements: 1.1, 1.2, 1.5, 2.1, 2.2, 2.3, 2.6_

- [x] 4.2 ダークモードでの表示確認を実施する
  - ダークモードに切り替えて全コンポーネントの色を確認
  - 背景、文字、ボーダーのコントラストが適切か確認
  - ホバー状態のダークモード表示を確認
  - _Requirements: 1.3, 2.4_

- [x] 4.3 モバイル表示の確認を実施する
  - 640px以下の画面幅でTagBadgeのサイズとタップ領域を確認
  - TagTreeのレイアウトが崩れないか確認
  - タッチデバイスでのインタラクションを確認
  - _Requirements: 1.4, 2.5_
