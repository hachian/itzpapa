# Implementation Plan

## Task Overview

| Task | Description | Requirements Coverage |
|------|-------------|----------------------|
| 1 | トップページへのdraftフィルター追加 | 1.1, 1.2, 1.3 |
| 2 | タグ一覧ページへのdraftフィルター追加 | 2.1, 2.2, 2.3, 2.4 |
| 3 | 個別タグページへのdraftフィルター追加 | 3.1, 3.2, 3.3, 3.4 |
| 4 | 本番ビルドでの検証 | 4.1, 4.2 |

---

- [x] 1. (P) トップページへのdraftフィルター追加
  - `getCollection('blog')` 呼び出しにフィルター関数を追加
  - 本番環境では `draft: true` の記事を除外
  - 開発モードでは全記事を表示可能に維持
  - 最新記事セクションに公開済み記事のみが表示されることを確認
  - _Requirements: 1.1, 1.2, 1.3_

- [x] 2. (P) タグ一覧ページへのdraftフィルター追加
  - `getCollection('blog')` 呼び出しにフィルター関数を追加
  - フィルター適用後の記事からタグを収集
  - タグのカウント数がdraft記事を含まないことを確認
  - draft記事のみに紐づくタグが一覧から除外されることを確認
  - 開発モードでは全タグがプレビュー可能
  - _Requirements: 2.1, 2.2, 2.3, 2.4_

- [x] 3. (P) 個別タグページへのdraftフィルター追加
  - `getStaticPaths()` 内の `getCollection('blog')` にフィルター関数を追加
  - フィルター適用後の記事からタグページを生成
  - 公開記事が0件のタグについてはページを生成しない
  - 各タグページの記事カウントがdraft記事を含まないことを確認
  - 開発モードでは全タグページがプレビュー可能
  - _Requirements: 3.1, 3.2, 3.3, 3.4_

- [x] 4. 本番ビルドでの検証
- [x] 4.1 ビルド実行と出力確認
  - `npm run build` を実行してビルドエラーがないことを確認
  - トップページHTMLにdraft記事タイトルが含まれていないことを確認
  - タグ一覧HTMLにdraft-onlyタグが含まれていないことを確認
  - draft-onlyタグの個別ページHTMLが存在しないことを確認
  - _Requirements: 4.1_

- [x] 4.2 RSSフィードの既存動作確認
  - RSSフィード出力にdraft記事が含まれていないことを確認
  - 既存のdraft除外ロジックが維持されていることを確認
  - _Requirements: 4.2_
