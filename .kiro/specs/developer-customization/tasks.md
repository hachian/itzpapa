# Implementation Plan

## Task 1: 設定システムの基盤構築

- [x] 1.1 サイト設定の型定義を作成する
  - SiteConfig、SiteInfo、ThemeConfig、SocialLinks、SocialLinkConfig、NavItem、FooterConfig、SeoConfig、FeatureFlags の型を定義
  - 各 SNS（GitHub、Twitter/X、YouTube、Bluesky、Instagram、LinkedIn、Mastodon、Threads）の enabled/url ペア構造を実装
  - TypeScript strict mode で型チェックと IDE 補完が有効になることを確認
  - _Requirements: 1.2, 3.5_

- [x] 1.2 設定ファイルを作成し既存の定数ファイルを置き換える
  - 型定義をインポートしてサイト設定オブジェクトを作成
  - サイト基本情報（タイトル、説明、著者、ベースURL）のサンプル値を設定
  - ナビゲーションメニュー項目のデフォルト値を設定
  - 各 SNS リンクの enabled/url をデフォルト値で初期化（GitHub のみ有効）
  - テーマカラー（primaryHue）、フッター情報、SEO 設定、機能フラグのデフォルト値を設定
  - 各設定項目の用途を説明するコメントを追加
  - 既存の consts.ts からのインポートを新しい設定ファイルに移行
  - _Requirements: 1.1, 1.3, 1.5, 2.1, 2.2, 3.1, 4.1, 5.1, 6.1, 7.1, 7.3, 8.1, 8.3_

## Task 2: SNS アイコンコンポーネントの実装

- [x] 2. SNS タイプに応じたアイコンを表示するコンポーネントを作成する
  - GitHub、Twitter/X、YouTube、Bluesky、Instagram、LinkedIn、Mastodon、Threads の SVG アイコンを内蔵
  - type プロパティで表示するアイコンを選択
  - size プロパティでアイコンサイズを制御（デフォルト: 24px）
  - currentColor を使用してスタイルと統一された色で表示
  - アクセシビリティ対応（aria-hidden="true"）
  - _Requirements: 3.2, 3.3_

## Task 3: ヘッダーコンポーネントの設定駆動化

- [x] 3.1 ナビゲーションメニューを設定から動的に生成する
  - 設定ファイルからナビゲーション項目を読み込み
  - 各メニュー項目のラベルと URL を設定値から表示
  - 外部リンク（http/https で始まる URL）に target="_blank" と rel="noopener noreferrer" を自動付与
  - 現在のページ URL と比較してアクティブ状態を判定・ハイライト
  - モバイルメニューも同様に設定駆動に変更
  - _Requirements: 5.1, 5.2, 5.3_

- [x] 3.2 ヘッダーの SNS リンクを設定から動的に表示する
  - 設定ファイルから SNS 設定を読み込み
  - enabled が true の SNS のみ SocialIcon コンポーネントでアイコンを表示
  - 各 SNS リンクに対応する URL を設定値から適用
  - デスクトップ・モバイル両方のヘッダーで SNS リンクを表示
  - _Requirements: 3.2, 3.3_

## Task 4: フッターコンポーネントの設定駆動化

- [x] 4.1 著作権表示を設定から動的に生成する
  - 設定ファイルからフッター設定を読み込み
  - 著作権テキストを設定値から表示
  - startYear が設定されている場合は「startYear - 現在年」形式で表示
  - startYear が未設定の場合は現在年のみを表示
  - サイトタイトルを設定から取得して著作権表示に使用
  - _Requirements: 6.1, 6.2, 6.3_

- [x] 4.2 (P) フッターの SNS リンクを設定から動的に表示する
  - 設定ファイルから SNS 設定を読み込み
  - enabled が true の SNS のみ SocialIcon コンポーネントでアイコンを表示
  - 各 SNS リンクに対応する URL を設定値から適用
  - enabled が true だが URL が空の場合は警告を出力し非表示にする
  - _Requirements: 3.2, 3.3, 3.4_

- [x] 4.3 (P) フッターのナビゲーションリンクを設定から動的に生成する
  - 設定ファイルからナビゲーション項目を読み込み
  - フッターナビゲーションをヘッダーと同じ設定で表示
  - _Requirements: 5.1_

## Task 5: BaseHead コンポーネントの設定駆動化

- [x] 5.1 テーマカラーを設定から適用する
  - 設定ファイルからテーマ設定を読み込み
  - primaryHue 値を CSS 変数として style タグに出力
  - primaryHue が範囲外（0-360）の場合はデフォルト値（293）にフォールバック
  - 既存の design-tokens.css の OKLCH システムと連携
  - ライトモード・ダークモード両方で正しく表示されることを確認
  - _Requirements: 4.1, 4.2, 4.3, 4.4_

- [x] 5.2 (P) SEO 設定を適用する
  - 設定ファイルから SEO 設定を読み込み
  - デフォルト OG 画像パスを設定値から適用
  - 記事に個別の OG 画像が設定されていない場合にデフォルト OG 画像を使用
  - サイトタイトル・説明文を設定から取得してメタタグに反映
  - _Requirements: 7.1, 7.2, 2.3_

- [x] 5.3 (P) Google Analytics 連携を実装する
  - 設定ファイルからトラッキング ID を読み込み
  - トラッキング ID が設定されている場合のみ Analytics スクリプトを出力
  - トラッキング ID が空または未設定の場合はスクリプトを出力しない
  - _Requirements: 7.3, 7.4_

## Task 6: 機能フラグによる表示制御

- [x] 6.1 目次コンポーネントの表示を設定で制御する
  - 設定ファイルから機能フラグを読み込み
  - tableOfContents が false の場合は目次コンポーネントを非表示
  - 記事ページのレイアウトで機能フラグをチェック
  - _Requirements: 8.1, 8.2_

- [x] 6.2 (P) タグクラウドの表示を設定で制御する
  - tagCloud が false の場合はタグクラウドを非表示
  - タグ一覧ページで機能フラグをチェック
  - _Requirements: 8.1, 8.2_

- [x] 6.3 (P) 関連記事の表示を設定で制御する
  - relatedPosts が false の場合は関連記事セクションを非表示
  - 記事ページで機能フラグをチェック
  - 注: 関連記事コンポーネントは現在未実装のため、フラグのみ設定システムに追加済み
  - _Requirements: 8.1, 8.2_

## Task 7: 統合テストとビルド検証

- [x] 7.1 設定変更がビルド結果に反映されることを検証する
  - 設定ファイルの各項目を変更してビルドを実行
  - サイトタイトル、説明文、著者情報が正しく反映されることを確認
  - primaryHue の変更でカラーテーマが変わることを確認
  - SNS リンクの enabled/url 変更が反映されることを確認
  - ナビゲーション項目の変更が反映されることを確認
  - 機能フラグの変更で表示が切り替わることを確認
  - _Requirements: 1.3, 2.3, 3.2, 3.3, 4.2, 4.3_

- [x] 7.2 必須設定項目の欠落時にビルドエラーが発生することを確認する
  - 必須フィールドを削除した設定ファイルでビルドを試行
  - TypeScript コンパイルエラーが発生することを確認
  - エラーメッセージが明確で欠落項目を特定できることを確認
  - _Requirements: 1.4_
