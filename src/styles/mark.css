/*
 * Mark Highlight Plugin CSS
 * Styles for the ==highlight== syntax
 */

/* Base mark element styling */
mark {
  /* Background using CSS variables with fallback
   * Default hue: complementary color of primary (primaryHue + 180)
   */
  background-color: var(--mark-bg, oklch(90% 0.20 calc(var(--primary-hue) + 180) / 0.6));

  /* Typography */
  color: inherit;
  font-weight: inherit;
  font-style: inherit;

  /* Layout */
  padding: 0.125em 0.25em;
  border-radius: 2px;

  /* Transitions for smooth effects */
  transition: background-color 0.2s ease;

  /* Accessibility */
  outline-offset: 2px;
}

/* Focus state for accessibility */
mark:focus {
  outline: 2px solid var(--color-accent, var(--color-primary-500));
  outline-offset: 1px;
}

/* Dark mode support */
html.dark mark {
  background-color: var(--mark-bg-dark, oklch(85% 0.18 calc(var(--primary-hue) + 180) / 0.4));
}

/* Custom class support */
mark.highlight-yellow {
  background-color: var(--mark-bg, oklch(90% 0.20 calc(var(--primary-hue) + 180) / 0.6));
}

html.dark mark.highlight-yellow {
  background-color: var(--mark-bg-dark, oklch(85% 0.18 calc(var(--primary-hue) + 180) / 0.4));
}

mark.highlight-blue {
  background-color: oklch(62% 0.20 260 / 0.3);
}

html.dark mark.highlight-blue {
  background-color: oklch(72% 0.16 260 / 0.4);
}

mark.highlight-green {
  background-color: oklch(70% 0.20 145 / 0.3);
}

html.dark mark.highlight-green {
  background-color: oklch(80% 0.18 145 / 0.4);
}

mark.highlight-pink {
  background-color: oklch(65% 0.25 350 / 0.3);
}

html.dark mark.highlight-pink {
  background-color: oklch(72% 0.20 350 / 0.4);
}

/* Print support */
@media print {
  mark {
    background-color: oklch(90% 0.20 calc(var(--primary-hue) + 180) / 0.3) !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }
}

/* Responsive adjustments - 統一ブレークポイント（767px以下） */
@media (max-width: 767px) {
  mark {
    /* Slightly larger touch targets on mobile */
    padding: 0.15em 0.3em;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  mark {
    background-color: yellow;
    color: black;
    font-weight: bold;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  mark {
    transition: none;
  }
}

/* Selection styling to ensure visibility */
mark::selection {
  background-color: oklch(0% 0 0 / 0.2);
}

mark::-moz-selection {
  background-color: oklch(0% 0 0 / 0.2);
}

/* ダークモードでは白い選択色を使用 */
html.dark mark::selection {
  background-color: oklch(100% 0 0 / 0.3);
}

html.dark mark::-moz-selection {
  background-color: oklch(100% 0 0 / 0.3);
}