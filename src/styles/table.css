/**
 * Table Styles - テーブルデザイン改善
 *
 * Markdownテーブルの視覚的なデザインを改善し、読みやすく美しいテーブル表示を提供
 *
 * Features:
 * - 基本スタイリング（境界線、パディング、角丸）
 * - ダークモード対応（html.dark + prefers-color-scheme）
 * - レスポンシブ対応（水平スクロール）
 * - 可読性向上（ゼブラストライプ、ホバーエフェクト）
 *
 * Requirements: 1.1-1.4, 2.1-2.3, 3.1-3.3, 4.1-4.3, 5.1-5.4
 */

/* =========================================
   CSS Variables - Light Mode
   ========================================= */
:root {
  /* Table-specific variables (using design-tokens) */
  --table-border-color: var(--color-gray-200);
  --table-header-bg: var(--color-gray-100);
  --table-row-even-bg: var(--color-gray-50);
  --table-row-hover-bg: var(--color-primary-500-alpha08);
}

/* =========================================
   Dark Mode Variables
   ========================================= */
html.dark {
  --table-border-color: var(--color-gray-700);
  --table-header-bg: var(--color-gray-800);
  --table-row-even-bg: oklch(22% 0.012 280);
  --table-row-hover-bg: var(--color-primary-dark-alpha20);
}

/* OS Dark Mode Preference */
@media (prefers-color-scheme: dark) {
  :root:not(.light) {
    --table-border-color: var(--color-gray-700);
    --table-header-bg: var(--color-gray-800);
    --table-row-even-bg: oklch(22% 0.012 280);
    --table-row-hover-bg: var(--color-primary-dark-alpha20);
  }
}

/* =========================================
   Base Table Styles
   ========================================= */
table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  font-size: var(--font-size-base);
  margin: var(--space-4) 0;
  border-radius: var(--radius-md);
  overflow: hidden;
  border: 1px solid var(--table-border-color);
  transition: border-color var(--duration-normal) var(--easing-default);
}

/* =========================================
   Header Cells
   ========================================= */
th {
  background-color: var(--table-header-bg);
  font-weight: var(--font-weight-semibold);
  text-align: left;
  padding: var(--space-3) var(--space-4);
  border-bottom: 2px solid var(--table-border-color);
  transition: background-color var(--duration-normal) var(--easing-default),
              border-color var(--duration-normal) var(--easing-default);
}

/* First header cell - top-left radius */
th:first-child {
  border-top-left-radius: calc(var(--radius-md) - 1px);
}

/* Last header cell - top-right radius */
th:last-child {
  border-top-right-radius: calc(var(--radius-md) - 1px);
}

/* =========================================
   Body Cells
   ========================================= */
td {
  padding: var(--space-3) var(--space-4);
  border-bottom: 1px solid var(--table-border-color);
  min-width: 100px;
  transition: background-color var(--duration-normal) var(--easing-default),
              border-color var(--duration-normal) var(--easing-default);
}

/* Last row - no bottom border (table has border) */
tbody tr:last-child td {
  border-bottom: none;
}

/* Last row corners */
tbody tr:last-child td:first-child {
  border-bottom-left-radius: calc(var(--radius-md) - 1px);
}

tbody tr:last-child td:last-child {
  border-bottom-right-radius: calc(var(--radius-md) - 1px);
}

/* =========================================
   Zebra Stripes
   ========================================= */
tbody tr:nth-child(even) {
  background-color: var(--table-row-even-bg);
}

/* =========================================
   Hover Effect
   ========================================= */
tbody tr:hover {
  background-color: var(--table-row-hover-bg);
}

/* =========================================
   Text Alignment Support
   ========================================= */
td[align="center"],
th[align="center"] {
  text-align: center;
}

td[align="right"],
th[align="right"] {
  text-align: right;
}

td[align="left"],
th[align="left"] {
  text-align: left;
}

/* =========================================
   Responsive - Horizontal Scroll
   ========================================= */
/* Use table-layout and overflow on table itself */
/* Note: Tables that exceed container width will be clipped.
   For full horizontal scroll support, wrap tables in a div.table-wrapper */

/* Table wrapper for horizontal scroll */
.table-wrapper {
  position: relative;
  overflow-x: auto;
  margin: var(--space-4) 0;
  border-radius: var(--radius-md);
  -webkit-overflow-scrolling: touch;
}

.table-wrapper table {
  margin: 0;
}

/* Scrollbar styling - consistent with site design */
.table-wrapper::-webkit-scrollbar {
  height: 6px;
}

.table-wrapper::-webkit-scrollbar-track {
  background: var(--color-primary-500-alpha05);
  border-radius: var(--radius-sm);
}

.table-wrapper::-webkit-scrollbar-thumb {
  background: linear-gradient(to right, var(--color-primary-500), var(--color-primary-600));
  border-radius: var(--radius-sm);
}

.table-wrapper::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(to right, var(--color-primary-600), var(--color-primary-700));
}

/* Firefox scrollbar */
.table-wrapper {
  scrollbar-width: thin;
  scrollbar-color: var(--color-primary-500) var(--color-primary-500-alpha05);
}

/* Scroll shadow indicators */
.table-wrapper::before,
.table-wrapper::after {
  content: '';
  position: absolute;
  top: 0;
  bottom: 0;
  width: 20px;
  pointer-events: none;
  z-index: 1;
}

.table-wrapper::before {
  left: 0;
  background: linear-gradient(to right, var(--color-surface), transparent);
  opacity: 0;
}

.table-wrapper::after {
  right: 0;
  background: linear-gradient(to left, var(--color-surface), transparent);
  opacity: 0;
}

/* =========================================
   Mobile Responsive
   ========================================= */
@media (max-width: 767px) {
  th,
  td {
    padding: var(--space-2) var(--space-3);
    font-size: var(--font-size-sm);
    min-width: 80px;
  }

  table {
    font-size: var(--font-size-sm);
  }
}

/* =========================================
   Reduced Motion
   ========================================= */
@media (prefers-reduced-motion: reduce) {
  table,
  th,
  td,
  tbody tr {
    transition: none;
  }
}
