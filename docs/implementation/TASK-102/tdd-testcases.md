# TASK-102: エスケープ処理とコード内記法の除外 - テストケース

## テストケース一覧

### 1. エスケープ処理のテスト

#### TC-102-001: 開始記号のエスケープ
- **入力**: `\==not highlighted==`
- **期待結果**: `==not highlighted==`（変換されない）

#### TC-102-002: 終了記号のエスケープ
- **入力**: `==not complete\==`
- **期待結果**: `==not complete==`（不完全な記法として扱い、変換されない）

#### TC-102-003: 両方のエスケープ
- **入力**: `\==completely escaped\==`
- **期待結果**: `==completely escaped==`（変換されない）

#### TC-102-004: 混在パターン
- **入力**: `\==escaped== and ==normal==`
- **期待結果**: `==escaped== and <mark>normal</mark>`

#### TC-102-005: エスケープ文字のエスケープ
- **入力**: `\\==should highlight==`
- **期待結果**: `\<mark>should highlight</mark>`

### 2. コードブロック内の除外テスト

#### TC-102-006: フェンスドコードブロック内
```markdown
**入力**:
```
==this should not be highlighted==
```

**期待結果**: ハイライト記法が変換されない
```

#### TC-102-007: インデントコードブロック内
- **入力**:
```
    ==this should not be highlighted==
```
- **期待結果**: ハイライト記法が変換されない

### 3. インラインコード内の除外テスト

#### TC-102-008: 基本的なインラインコード
- **入力**: `Here is code: \`==not highlighted==\``
- **期待結果**: ハイライト記法が変換されない

#### TC-102-009: 複数バッククォートのインラインコード
- **入力**: `Here is code: \`\`\`==not highlighted==\`\`\``
- **期待結果**: ハイライト記法が変換されない

### 4. 複合パターンのテスト

#### TC-102-010: エスケープとコードの組み合わせ
- **入力**: `\==escaped== and \`==code==\``
- **期待結果**: 両方とも変換されない

#### TC-102-011: 正常とエスケープの混在
- **入力**: `==normal== and \==escaped== text`
- **期待結果**: `<mark>normal</mark> and ==escaped== text`

### 5. エッジケースのテスト

#### TC-102-012: 連続するエスケープ文字
- **入力**: `\\\\==text==`
- **期待結果**: `\\<mark>text</mark>`

#### TC-102-013: エスケープ文字のみ
- **入力**: `\\==`
- **期待結果**: `\==`

#### TC-102-014: 不正なエスケープパターン
- **入力**: `=\=text=\=`
- **期待結果**: `=\=text=\=`（変換されない）

### 6. パフォーマンステスト

#### TC-102-015: 大量のエスケープパターン
- **入力**: `\==text==`.repeat(1000)
- **期待結果**: すべてエスケープされ、パフォーマンスが劣化しない
- **条件**: 処理時間が既存実装の110%以内

### 7. 回帰テスト

#### TC-102-016: 既存の基本機能
- **入力**: `==normal highlight==`
- **期待結果**: `<mark>normal highlight</mark>`（既存機能が影響を受けない）

#### TC-102-017: 複数行ハイライト
- **入力**: `==multi\nline==`
- **期待結果**: `<mark>multi\nline</mark>`（既存機能が影響を受けない）

## テスト実装戦略

### 1. 単体テスト
- エスケープ処理の個別テスト
- コード除外の個別テスト
- パフォーマンステスト

### 2. 統合テスト
- remarkプロセッサ全体での動作確認
- 他のプラグインとの相互作用確認

### 3. 回帰テスト
- TASK-101で実装した全機能の動作確認
- 既存のテストスイートの実行

## 実装前の準備

### 必要なテストデータ
1. エスケープパターンの例
2. コードブロックのサンプル
3. 複合パターンの例
4. パフォーマンステスト用の大量データ

### テスト環境
1. 単体テストフレームワーク
2. remarkプロセッサのテスト設定
3. パフォーマンス測定ツール