# TASK-101: TagBadgeコンポーネントのスタイル統一 - 要件定義

## 概要

TagBadgeコンポーネントのスタイルを統一し、階層タグと単一タグの表示を同一にする。新しく定義されたCSS変数を使用して、一貫したスタイルを提供する。

## 詳細要件

### 機能要件

1. **スタイル統一** (REQ-001)
   - 階層タグと単一タグを同じスタイルで表示
   - `isHierarchical` プロパティによる区別を廃止
   - すべてのタグで統一された見た目を提供

2. **CSS変数の活用** (REQ-401, REQ-402)
   - 新しく定義されたCSS変数を使用
   - ハードコードされた色値を廃止
   - ダークモード対応の簡素化

3. **出現回数表示の統一** (REQ-003)
   - タグカウントのスタイルを統一
   - 視覚的に一貫した表示
   - アクセシビリティ対応

### 技術要件

1. **CSS変数の使用**
   ```css
   background-color: var(--tag-bg);
   color: var(--tag-color);
   border: 1px solid var(--tag-border);
   ```

2. **アニメーション効果**
   - ホバー時の `translateY(-1px)` 効果
   - ボックスシャドウの追加
   - スムーズなトランジション

3. **レスポンシブ対応**
   - モバイルデバイス用のサイズ調整
   - タッチデバイス用の最小タップサイズ確保

### UI/UX要件

1. **ホバー効果**
   - 背景色の変更
   - 文字色の変更
   - Y軸移動とシャドウ効果

2. **フォーカス表示**
   - 2px のアウトライン表示
   - 適切なコントラスト比の確保

3. **アクセシビリティ**
   - `aria-label` の適切な設定
   - `role` 属性の設定
   - キーボードナビゲーション対応

## 受け入れ基準

### 必須条件

- [ ] 階層タグと単一タグが同じスタイルで表示される
- [ ] CSS変数を使用してスタイルが定義されている
- [ ] ダークモードで適切にスタイルが切り替わる
- [ ] ホバー効果が正常に動作する
- [ ] フォーカス表示が適切に機能する
- [ ] タグカウントが統一されたスタイルで表示される

### パフォーマンス基準

- [ ] レンダリング時間が100ms以内
- [ ] CSSトランジションが滑らか
- [ ] メモリリークがない

### アクセシビリティ基準

- [ ] WCAG 2.1 AA準拠
- [ ] コントラスト比4.5:1以上
- [ ] キーボードでナビゲーション可能
- [ ] スクリーンリーダーで適切に読み上げられる

## テスト対象

1. **単体テスト**
   - プロパティの正しい処理
   - CSSクラスの適切な生成
   - アクセシビリティ属性の設定

2. **ビジュアルテスト**
   - 階層タグと単一タグの表示統一
   - ダークモード表示
   - ホバー・フォーカス状態

3. **統合テスト**
   - TagListコンポーネントとの連携
   - TagTreeコンポーネントとの連携

## 影響範囲

### 変更対象ファイル
- `src/components/TagBadge.astro` - メインの変更対象

### 影響を受ける可能性があるファイル
- `src/components/TagList.astro` - TagBadgeを使用
- `src/components/TagTree.astro` - TagBadgeを使用
- `src/styles/tag.css` - 既存のタグスタイル

### テストファイル
- `tests/components/TagBadge.test.ts` - 新規作成
- `tests/visual/tag-styles.test.ts` - 新規作成